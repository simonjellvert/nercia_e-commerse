{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid welcome mb-5">
    <div class="row w-100 d-flex justify-content-center align-items-center">
        <h1>Your Cart</h1>
        <hr>
        {% if not request.user.is_authenticated %}
            <div>
                <h4>Do you have an account?</h4>
                <p>Sign up for faster checkout and receive newsletters about upcoming trainings and deals. link to sign-in</p>
            </div>
        {% endif %}
        {% if bag_items %}
            <div class="col-lg-6">
                <h3>Products</h3>
                <div>
                    {% for item in bag_items %}
                        <div class="row">
                            <div class="col-3">
                                <img src="{{ item.product.image.url }}" alt="{{ product.alt_atr }}" style="width: 150px;">
                            </div>
                            <div class="col-9">
                                <h4>{{ item.product.name }}</h4>
                                <p>Start date</p>
                                <div class="row">
                                    <div class="col">{{ item.quantity }}</div>
                                    <div class="col">${{ item.product.price }}</div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="col-lg-4">
                <h3>Order summary</h3>
                <div class="row">
                    <div class="col">Bag Total</div>
                    <div class="col">${{ total|floatformat:2 }}</div>
                </div>
                {% if promo_code %}
                    <div class="row">
                        <div class="col">Discount</div>
                        <div class="col">${{ total_discount }}</div>
                    </div>
                {% else %}
                    <div class="row">
                        <div class="col">Discount</div>
                        <div class="col">$0.00</div>
                    </div>
                {% endif %}
                <hr>
                <div class="row">
                    <div class="col">Grand Total (excl. VAT)</div>
                    <div class="col">{{ grand_total|floatformat:2 }}</div>
                </div>
                <div class="row">
                    <div class="col">VAT</div>
                    <div class="col">${{ tax|floatformat:2 }}</div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <a href="{% url 'products' %}">Keep shopping</a>
                    </div>
                    <div class="col-6">
                        <a href="">Checkout</a>
                    </div>
                </div>
                <hr>
                <!-- Bootstrap 4 dropdown input field for promocode -->
                <div class="promo-code row mx-0 mb-3 border-bottom">
                    <div class="col-12">
                        <div class="row">
                            <button class="btn btn-link promo-open-btn" type="button" data-toggle="collapse" data-target="#collapsePromoInput" aria-expanded="true" aria-controls="collapsePromoInput">
                                <h4>Do you have a promo code?</h4>
                                <i class="fa-solid fa-chevron-down"></i>
                            </button>
                        </div>
                        <div class="promo-form collapse show">
                            <form action="" method="">
                                <div class="row">
                                    <div class="col-12">
                                        <input type="hidden" value="Enter your code here">
                                        <div class="col-12">
                                            <button type="submit" aria-label>Apply</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <div>
                <h4>Do you have an account?</h4>
                <p>Sign up for faster checkout and receive newsletters about upcoming trainings and deals. link to sign-in</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}