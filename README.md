# NERCIA WEBSHOP

**Deployed website: [Link to website](https://.herokuapp.com/)**

![Main image](/documentation/design/responsive_mockup.png)

---

## About

Nercia is a swedish competence development company that has a turnover of approx SEK 250m and has around 150 employees spread out over 17 offices in Sweden. They're working with both government agencies, municipal education coordinators and private own companies. 
The mission is to both develop skill (through Nercia Utbildning AB/Nercia Training Ltd) and to add skill (through Nercia Bemanning AB/Nercia Staffing Ltd).

Within Nercia Training there is a business area in swedish called "Företagsutbildning", in english translated to Business training in which a long lasting strategic orientation has been to develop a webshop where the customers can shop their trainings without having to contact 
a salesperson each and every time they want to book a training for their staff. 

The business area manager, digital training producer and marketing manager has been involved in both lay out of the webshop and what functions they need to be able to launch the website if the board of the company wants the site to go live.

The webshop has a login system so that the user can be able to save billing information and keep track of previuos orders. It has the typical shopping bag function to edit or delete items which has been added. It has a checkout system that provides options for both card payment or by invoice. And of course a card payment system for that option.
Since the products (trainings) are regularly updated with price and new dates it has an easy product managing for the administrators of the site. 


---

## UX

The marketing manager wanted the webshop to look similar to the original website so the visitor would be familiar with the look and to ease the transition from the original page to the webshop. So the first page of the webshop has a obvious welcoming message.

The website follows Nercia's graphical profile which is set up for the all graphical materials to be eye-catching and user friendly.

---

## Target Audience

This webshop is for new and old customers of Nercia and should exist to simplify the booking of the training courses. The purpose is to reduce waitning time for the customer to recieve a confirmation of the booking (which now takes place by a salesperson responding manually), which sometimes can take up till 24 hours. This webshop also allow the customer to ensure that invoicing is set up as preffered and for Nercia's finance department to ensure the invoice is not sent to the wrong adress.

---

## User Stories

#### Viewing and navigation

| Issue ID    | User Story |
|-------------|-------------|
| [#1](https://github.com/simonjellvert/nercia_e-commerse/issues/1) | As a **site user** I can **view a list of products** so that I can **select and add those I need for myself or my employees in the shippoing bag** |
| [#2](https://github.com/simonjellvert/nercia_e-commerse/issues/2) | As a **site user** I can **see the program of the training I'm interested in** so that I can **understand what to expect of the training** |
| [#3](https://github.com/simonjellvert/nercia_e-commerse/issues/3) | As a **site user** I can **search and filter trainings in different subjects, or by name or by description** so that I can **easily find what I'm looking for** |
| [#4](https://github.com/simonjellvert/nercia_e-commerse/issues/4) | As a **site user** I can **view my shopping bag** so that I can **double check if i forgot something** |
| [#5](https://github.com/simonjellvert/nercia_e-commerse/issues/5) | As a **site user** I can **check the order history** so that I can **go back and see when myself or an employee attended the training** |

#### Registration

| [#6](https://github.com/simonjellvert/nercia_e-commerse/issues/6) | As a **site user** I can **register an account** so that I can **have a personal page to store my information and purchases** |
| [#7](https://github.com/simonjellvert/nercia_e-commerse/issues/7) | As a **site user** I can **login and logout** so that I can **access my personal information** |
| [#8](https://github.com/simonjellvert/nercia_e-commerse/issues/8) | As a **site user** I can **recover my password** so that I can **recover my account** |
| [#9](https://github.com/simonjellvert/nercia_e-commerse/issues/9) | As a **site user** I can **receive an email confirmation after registration** so that I can **verify that my account was successfully created** |
| [#10](https://github.com/simonjellvert/nercia_e-commerse/issues/10) | As a **site user** I can **update or edit my account** so that I can **edit my information** |
| [#11](https://github.com/simonjellvert/nercia_e-commerse/issues/11) | As a **site user** I can **delete my account** so that I can **remove it if I'm not longer using it** |
| [#24](https://github.com/simonjellvert/nercia_e-commerse/issues/24) | As a ***site user** I can **subscribe to newsletters** so that I can **hear about new products and other relevant information regarding company training.** |

#### Bag

| [#12](https://github.com/simonjellvert/nercia_e-commerse/issues/12) | As a **site user** I can **edit/update quantity of the product I've added** so that I **don't select the wrong number of products** |
| [#13](https://github.com/simonjellvert/nercia_e-commerse/issues/13) | As a **site user** I can **delete a product from the shopping bag** if I **accidentally added the wrong product** |
| [#14](https://github.com/simonjellvert/nercia_e-commerse/issues/14) | As a **site user** I can **add name and email of the participant on each training** so that I can **make sure they get an invite to the training** |

#### Checkout

| [#15](https://github.com/simonjellvert/nercia_e-commerse/issues/15) | As a **site user** I can **save my billing information** so that I can **reuse it without entering it again the next time** |
| [#16](https://github.com/simonjellvert/nercia_e-commerse/issues/16) | As a **site user** I can **see the total cost of my shopping bag** so that I **make sure i don't go over budget** |
| [#17](https://github.com/simonjellvert/nercia_e-commerse/issues/17) | As a **site** user I can **choose if I want to pay with card or bill** so that I can **make sure my payment is going to be handled the way I want it to** |

#### After checkout

| [#18](https://github.com/simonjellvert/nercia_e-commerse/issues/18) | As a **site user** I can **receive a order confirmation efter checkout** so that I can **see what i bought** |
| [#19](https://github.com/simonjellvert/nercia_e-commerse/issues/19) | As a **site user** I can **receive a email confirmation after checkout** so that I can **get proof of my purchase** |

#### Manager and admin

| [#20](https://github.com/simonjellvert/nercia_e-commerse/issues/20) | As a **admin** I can **add, edit and delete categories** so that I can **keep them up to date** |
| [#21](https://github.com/simonjellvert/nercia_e-commerse/issues/21) | As a **admin** I can **add, edit and delete products** so that I can **make sure the products are up to date** |
| [#22](https://github.com/simonjellvert/nercia_e-commerse/issues/22) | As a **admin** I can **review customers orders** so that I can **add them to the CRM** |
| [#23](https://github.com/simonjellvert/nercia_e-commerse/issues/23) | As a **administrator** I can **send newsletters to those users that subscribes** so that **they can receive information about new products and other relevant information** |

---

## Business Model

The Business Model is B2C, meaning that the company sells products to customers only.
It focuses on individual transactions only.

---

## Web marketing

in order for this webshop to attract visitors, Nercia's marketing department needs to do a good job with web marketing.

1. Newsletters

Newsletters is implemented in the webshop to target visitors that already have an account registered, and maybe allready have made a purchase on the store.

2. [Facebook](https://www.facebook.com/Nercia.se/)

Facebook is a great tool for webmarketing, although it's not Nercia's primary social media, since the customer of Nercia is business managers.

3. [Instagram](https://www.instagram.com/nercia1992/)

Instagram is also a great tool for webmarketing but like Facebook it's not Nercia's primary tool.

4. [TikTok](https://www.tiktok.com/@nercia1992?lang=sv-SE)

This social media is on try out at Nercia's marketing department to figure out wheter its a good marketing tool or not.

5. [LinkedIn](https://www.linkedin.com/company/nercia-utbildning-bemanning/mycompany/)

LinkedIn is the primary marketing tool for Nercia, this is where the target group is and where the target group socialize to get tips and trix to improve their businesses. Nercia's is already doing a great job marketing all their business areas (competence development and competence recruitment). When marketing the trainings under the competence development area it would be easy to link directly to the webshop to make it easier for the interested visitor to place an order. Today, when Nercia is marketing a product on LinkedIn the visitor is facing one or two steps more before there is an accept for a order. This webshop would prevent those those decision makers, who are (often) under a lot of stress or don't have the patience to carry out a few more steps before booking a training, to ignore booking the training.

---

## Future development

#### Link up bookings/order directly to Learning plattform
Nercia has their own learning plattform where the participant get all their info on their training, such as date and time, location, course materials etc. 
When a order has been placed and is valid with participants information (email, name) that info will go straight to the specific training in the learning plattform for the administrators to handle.

#### Link up booking/orders to finance program
When a order has been made and the payment option is invoice the necessary info will automatically be uploaded to the finance program so the finance administrators donät have to do extra work.

#### Link up orders directly to CRM system
The orders should automatically be loaded into the CRM database so a salesman can handle incoming orders.

#### Order cancellation
When a order has been placed the user should be able to cancel it and all information about the order will be deleted.

#### Add attendee
The user should be able to add attendees to each product/training.

#### Google map
Tidy up the map on contacts page, missing functionality in the version.

#### Cancel card payments
Implement easy handling for canceling a customers card payment.

#### Resonsive orde management page
In this version the order management is responsive but it doesent look good even though an administrator of this particular page is not likely going to handle orders from the phone or tablet. But for future development that feature is on to do.

#### Obvious redirecting (checkout)
In this version a user that is not authenticated is not able to enter the checkout page, instead it is redirected to the sign up page - but without any messages. It's a bug that should be fixed in the upcoming versions.

#### Google map warning
The Google Map on contacts page works as I expect it do, but get this warning in the browser console: 
"Google Maps
JavaScript API has been leaded directly without leading=async.
This can result in suboptimal performance. For best-practice leading patterns please see: https://goo.gle/js-api-loading"
Next version should have solved this warning.

#### Webhooks for payment
The code is set up but haven't had the time to test it, but will be tested and implemented for next version.

#### Refined file adder
The button for file adding in products and contacts templates does not look so good and should be refined for better UX.

---

## Technologies used
- ### Languages:
    
    + **Python 3.12.1**: the primary language used to develop the server-side of the website.
    + **JavaScript**: the primary language used to develop interactive components of the website.
    + **HTML**: the markup language used to create the website.
    + **CSS**: the styling language used to style the website.

- ### Frameworks and libraries:

    + **Django**: python framework used to create all the logic.
    + **jQuery**: was used to control click events and sending AJAX requests.
    + **jQuery User Interface**: was used to create interactive elements.

- ### Databases:

    + **SQLite**: was used as a development database.
    + **PostgreSQL**: the database used to store all the data.


- ### Other tools:

    + **Git**:: the version control system used to manage the code.
    + **Pip3**: the package manager used to install the dependencies.
    + **Gunicorn**: the web server used to run the website.
    + **Psycopg2**: the database driver used to connect to the database.
    + **Django-allauth** the authentication library used to create the user accounts.
    + **Django-crispy-forms**: was used to control the rendering behavior of Django forms.
    + **GitHub**: used to host the website's source code.
    + **CodeAnywhere**: the IDE used to develop the website.
    + **GitPod**: the alternative IDE used to develop the website.
    + **Amazon AWS**: host of static files.
    + **Chrome DevTools**: was used to debug the website.
    + **Font Awesome**: was used to create the icons used in the website.
    + **Miro**: was used to make a flowchart for the README file.
    + **Coolors**: was used to make a color palette for the website.
    + **W3C Validator**: was used to validate HTML5 code for the website.
    + **W3C CSS validator**: was used to validate CSS code for the website.
    + **JShint**: was used to validate JS code for the website.
    + **PEP8**: was used to validate Python code for the website.
    + **Stripe**: was used to create the payment system.
    + **Lunapic**: was used to crop and center unsplash images.
    + **Sitemap Generator**: was used to create the sitemap.xml file.

---

## Features

Please refer to the [FEATURES.md](FEATURES.md) file for all test-related documentation.

---

## Design

The website follows Nercia's graphical profile which is set up for the all graphical materials to be eye-catching and user friendly.

#### Color Scheme

![Color Scheme](/documentation/design/color_palette.png)

The colors are from Nercia's graphic profile and is used mainly for backgrounds and buttons.
- #000000 is used for the background for the footer
- #007EC1 is the color of the logo
- #0082D3 is used for buttons
- #0299E5 is used for on-hovering buttons and links
- #DADADA is used for hovering effect on dropdown menu in navbar
- #F2F3F5 is used for highlighting parts in the templates.
- #FFFFFF is used as the default background

#### Typography

The fonts used for this website are following Nercias graphical profile: ["Ubuntu"](https://fonts.google.com/specimen/Ubuntu?preview.text=Welcome!&query=ubuntu).

#### Images

The following images are used as backgrounds for a more pleasent UX.
Images are hijacked from Nercia's offial website.

+ Home page
![Home page background](/static/img/background_img/background_home.jpg)

+ Products page
![Products page background](/static/img/background_img/background_products.png)

Product images are taken by Nercia's in-house staff and is used in the same way on the offial website.

![Screenshot of product page](/documentation/design/product_images.png)

---

## Agile Methodology

#### GitHub Project Management

I've used GitHubs project management tools for this project to make sure I don't start working on many different to do's at the same time. It have helped me focus on the mission to complete each user story. Although when I got stuck for a longer time with an issue I jumped back to style or make small adjustments on previously finished user stories just to let my mind re-group.

For me it has been a very useful tool and I'm not sure I would have had everything under control if I had to work without it.

I divided the user stories into 6 different mini-projects and tried as best as I could to stick to finish one mini-project at a time.

+ [Mini-project: Viewing and navigation](https://github.com/users/simonjellvert/projects/6)

![Screenshot of mini-project Viewing and navigation](/documentation/project-management/user_stories_viewing.png)

+ [Mini-project: Registration](https://github.com/users/simonjellvert/projects/7)

![Screenshot of mini-project Viewing and navigation](/documentation/project-management/user_stories_registration.png)

+ [Mini-project: Bag](https://github.com/users/simonjellvert/projects/9)

![Screenshot of mini-project Viewing and navigation](/documentation/project-management/user_stories_bag.png)

+ [Mini-project: Checkout](https://github.com/users/simonjellvert/projects/10)

![Screenshot of mini-project Viewing and navigation](/documentation/project-management/user_stories_checkout.png)

+ [Mini-project: After Checkout](https://github.com/users/simonjellvert/projects/11)

![Screenshot of mini-project Viewing and navigation](/documentation/project-management/user_stories_aftercheckout.png)

+ [Mini-project: Manager & Admin](https://github.com/users/simonjellvert/projects/13)

![Screenshot of mini-project Viewing and navigation](/documentation/project-management/user_stories_manageradmin.png)

---

## Information Architecture

### Database

* During the earliest stages of the project, the database was created using SQLite.
* The database was then migrated to PostgreSQL.

### Entity-Relationship Diagram

The structure of building the model is from the ERD below. The flowchart has been updated since the structure has been updated during the development process.

![Screenshot of ERD](/documentation/erd/erd.png)

### Data Modeling

#### CustomUser Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| email | email | EmailField | _('email address'), unique=True |

#### UserProfile Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| user | user | OneToOneField | CustomUser, on_delete=models.CASCADE, unique=True |
| first_name | first_name | CharField | max_length=30 |
| last_name | last_name | CharField | max_length=30 |
| email | email | EmailField |  |
| phone_number | phone_number | CharField | max_length=20, null=False, blank=False |
| company_name | company_name | CharField | max_length=100, null=False, blank=False |
| org_num | org_num | CharField | max_length=20, null=False, blank=False |
| street_address1 | street_address1 | CharField | max_length=80, null=False, blank=False |
| street_address2 | street_address2 | CharField | max_length=80, null=True, blank=True |
| postcode | postcode | CharField | max_length=20, null=False, blank=False |
| city | city | CharField | max_length=40, null=False, blank=False |
| country | country | CountryField | blank_label='Country', null=False, blank=False |
| invoice_email | invoice_email | EmailField | max_length=254, null=False, blank=False |
| newsletter_subscription | newsletter_subscription | BooleanField | default=False, null=False, blank=False |

#### Product Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| name | name | CharField | max_length=254 |
| description_short | description_short | TextField | max_length=254 |
| description | description | TextField | default='Description of the training' |
| category | category | ManyToManyField | Category, blank=True |
| price | price | DecimalField | max_digits=8, decimal_places=2 |
| duration | duration | CharField | max_length=254, null=True, blank=True |
| perks | perks | CharField | max_length=254, null=True, blank=True |
| image | image | ImageField | null=True, blank=True |
| alt_atr | alt_atr | CharField | max_length=254, null=True, blank=True |
| online_onsite | online_onsite | CharField | max_length=20, choices=ONLINE_ONSITE_CHOICES, default=ONSITE |
| quantity | quantity | PositiveIntegerField | default=0 |

#### ProductContent Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| product | product | ForeignKey | 'Product', null=True, blank=True, on_delete=models.SET_NULL |
| day | day | CharField | max_length=254, null=True, blank=True |
| title | title | CharField | max_length=254, null=True, blank=True |
| purpose | purpose | TextField | null=True, blank=True |
| topics | topics | TextField | null=True, blank=True |

#### Newsletter Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| title | title | CharField | max_length=254, blank=False, null=False |
| content | content | TextField | blank=False, null=False |
| newsletter_category | newsletter_category | CharField | max_length=20, choices=NEWSLETTER_CATEGORIES, default='general' |
| created_at | created_at | DateTimeField | auto_now_add=True |

#### Contact Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| name | name | CharField | max_length=100, null=False, blank=True |
| email | email | EmailField | null=False, blank=False |
| phone_number | phone_number | CharField | max_length=20, blank=False, null=False |
| image | image | ImageField | null=False, blank=False |

#### Checkout Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| order_number | order_number | CharField | max_length=10, unique=True |
| user_profile | user_profile | ForeignKey | UserProfile, on_delete=models.CASCADE, related_name='orders' |
| created | created | DateTimeField | auto_now_add=True |
| order_total | order_total | DecimalField | max_digits=8, decimal_places=2, null=False, ,blank=False |
| grand_total | grand_total | DecimalField | max_digits=8, decimal_places=2, null=False, blank=False |
| tax | tax | DecimalField | max_digits=8, decimal_places=2, null=False, blank=False |
| payment_option | payment_option | CharField | max_length=20, choices=PAYMENT_OPTIONS, default=INVOICE |
| invoice_ref | invoice_ref | CharField | max_length=254, null=True, blank=True |

#### OrderLineItem Model

| Name          | Database Key  | Field Type    | Validation |
| ------------- | ------------- | ------------- | ---------- |
| order | order | ForeignKey | max_length=10, unique=True | Order, null=False, blank=False, on_delete=models.CASCADE, related_name='lineitems' |
| product | product | ForeignKey | Product, null=False, blank=False, on_delete=models.CASCADE |
| quantity | quantity | PositiveIntegerField | Product, null=False, blank=False, on_delete=models.CASCADE |
| lineitem_total | lineitem_total | DecimalField | max_digits=8, decimal_places=2, null=False, blank=False, editable=False |

---

## Testing

Please refer to the [TESTING.md](TESTING.md) file for all test-related documentation.

---

## Deployment and Payment setup

- The app was deployed to [Heroku](https://www.heroku.com/).
- The database was deployed to [ElephantSQL](https://www.elephantsql.com/).

<!-- - The app can be reached by the [link](). -->


Please refer to the [DEPLOYMENT.md](DEPLOYMENT.md) file for all deployment and payment-related documentation.

---

## Credits

- [GitHub](https://github.com/) for the agile project management tool.
- [Django](https://www.djangoproject.com/) for the framework.
- [Font awesome](https://fontawesome.com/): for the icons.
- [Amazon AWS](https://aws.amazon.com/): for providing a free hosting.
- [Bootstrap](https://getbootstrap.com/): for providing a simple way to style my HTML templates.
- [Postgresql](https://www.postgresql.org/): for providing a free database.
- [Stripe](https://stripe.com/): for providing a free payment gateway.
- [fontawesome](https://fontawesome.com/): for providing free icons.
- [googlefonts](https://fonts.google.com/): for providing free fonts.
- [Responsive Viewer](https://chrome.google.com/webstore/detail/responsive-viewer/inmopeiepgfljkpkidclfgbgbmfcennb/related?hl=en): for providing a free platform to test website responsiveness
- [Favicon Generator. For real.](https://realfavicongenerator.net/): for providing a free platform to generate favicons.
- [Sitemap Generator](https://www.xml-sitemaps.com/): for providing a free platform to generate sitemaps.
- [Coolors](https://coolors.co/): for providing a free platform to generate your own palette.

---

## Acknowledgments

- [Serhat Teker](https://serhatteker.com/) for the guide on how to set up authentication using email instead of username ([Authentication using Email](https://tech.serhatteker.com/post/2020-01/email-as-username-django/))
- [Juliia Konovalova](https://github.com/IuliiaKonovalova) for great mentoring during the development. Also for sharing the structure of markdown files.
- John (didn't catch the last name) at CodeInstitute's Tutor Assistance for helping me 'crack the code' when i was stuck with my checkout app!
- My girlfriend Andrea,for accepting me as an absent boyfriend for the last month + I'll make it up to you!

## Tank you...

...for reading about my work. I hope you enjoyed the website - and maybe you found a training that would help you boost your career!

Have a nice day!

Best regards,
Simon Jellvert

<!-- [Nercia Webshop]() -->

