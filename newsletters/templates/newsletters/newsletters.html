{% extends "base.html" %}
{% load static %}

{% block extra_title %} | Newsletters{% endblock %}

{% block content %}
<div class="container-fluid container-product-header mx-3 mx-sm-5 mt-5">
    <!-- Page header -->
    <div>
        <h1 class="page-header">
            Newsletters
        </h1>
    </div>
</div>
<hr class="custom-hr-pr-detail">
<div class="col-12 mx-3 mx-sm-5">
    <div>
        <!-- Button for create new newsletter -->
        <div class="row mb-3">
            <a href="{% url 'create_newsletter' %}" class="btn btn-primary rounded-0" aria-label="Go to create newsletter page">Create new</a>
        </div>
        <div class="row mt-3">
            <!-- Filters previous newsletters by category -->
            <div class="col-12 col-md-4 p-0">
                <form method="get" action="{% url 'newsletters' %}">
                    <div class="row ml-1">
                        <label for="newsletter_category">Filter by Category:</label>
                        <select name="newsletter_category" id="newsletter_category">
                            <option value="">All</option>
                            <option value="general">General</option>
                            <option value="promotions">Promotions</option>
                            <option value="product_updates">Product Updates</option>
                        </select>
                    </div>
                    <div class="row ml-1">
                        <button type="submit" class="btn btn-primary rounded-0">Filter</button>
                    </div>
                </form>
            </div>
        </div>
        <!-- Displays previous newsletters -->
        <div class="row mt-3">
            <div class="col-12 col-md-8 p-0">
                <table class="table table-sm table-borderless">
                    <thead>
                        <tr>
                            <th>Created</th>
                            <th>Title</th>
                            <th>Category</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for newsletter in newsletters_list %}
                            <tr>
                                <td>
                                    {{ newsletter.created_at }} <br>
                                </td>
                                <td>
                                    {{ newsletter.title }}
                                </td>
                                <td>
                                    {{ newsletter.newsletter_category|title }}</td>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% endblock %}